<!DOCTYPE html>
<html>
    <head>
        <title>Git Log Format</title>
    </head>
    <style>
        body{
            font-family: monospace;
        }
        #command{
            background-color: black;
            color: white;
            font-family: monospace;
            padding: 1rem;
            width: fit-content;
        }
    </style>
    <body> 
        <h1>Git Log Format</h1>
        <p>Step 1: Generate log command</p>
        <h3><b>Filter: </b></h3>
        <label for="from">From: </label>
        <input type="date" id ="from" oninput="generate()"/>
        <label for="to">To: </label>
        <input type="date" id ="to" oninput="generate()"/>
        <label for="authors">Authors: </label>
        <input type="text" id ="authors" placeholder="separate with /" oninput="generate()"/>
        <p></p>
        <input type="checkbox" id ="merge" oninput="generate()"/>
        <label for="merge">Exclude merge commits</label>
        <input type="checkbox" id ="all" oninput="generate()"/>
        <label for="all">Show commits from all branches</label>

        <h3><b>Format: </b></h3>
        <label>Include: </label>
        <input type="checkbox" id ="date" oninput="generate()"/>
        <label for="date">Date</label>
        <input type="checkbox" id ="hash" oninput="generate()"/>
        <label for="hash">Hash</label>
        <input type="checkbox" id ="author" oninput="generate()"/>
        <label for="author">Author</label>
        <input type="checkbox" id ="message" oninput="generate()"/>
        <label for="message">Message</label>
        <p></p>
        <label for="advanced">Advanced: </label>
        <input type="text" id ="advanced" placeholder="overrides options above" oninput="generate()"/>
        <label for="advanced">(<a href="https://git-scm.com/docs/git-log#_options">docs</a>)</label>
        <p>(Leave all blank for default)</p>

        <h3><b>Options: </b></h3>
        <label for="args">Arguments: </label>
        <input type="text" id ="args" placeholder="other arguments" oninput="generate()"/>
        <label for="args">(<a href="https://git-scm.com/docs/pretty-formats#:~:text=no%2Dabbrev.-,format%3A%3Cformat%2Dstring%3E,-The%20format%3A%3Cformat">docs</a>)</label>
        <p></p>
        <input type="checkbox" id ="copy" oninput="generate()"/>
        <label for="copy">Auto copy log to clipboard on Windows</label>


        <h3><b>Output: </b></h3>
        <p title="Click to copy command" id="command" onclick="copy()">Command will be shown here. Click to copy.</p>

        <p>Step 2 (optional): Link hash to commit on remote repository</p>
        <p>Enter path to commit on remote repository (e.g. https://github.com/user/repo/commit)</p>
        <label for="url">URL: </label>
        <input type="url" id="url" />
        <p>Output from command generated above</p>
        <textarea id="loginput"></textarea>
    </body>
</html>
<script>
    let command = "Command will be shown here. Click to copy.";
    document.addEventListener("DOMContentLoaded", ()=>{

    });
    function generate() {
        let output = "git log";
        if (document.getElementById("all").checked) {
            output += " --all"
        }
        if (document.getElementById("merge").checked) {
            output += " --no-merges"
        }
        if (document.getElementById("authors").value != ""){
            let names = document.getElementById("authors").value.split("/");
            for (name in names){
                output += " --author='"+ names[name] + "'";
            }
        }
        if (document.getElementById("from").value != ""){
            output += " --since=" + document.getElementById("from").value;
        }
        if (document.getElementById("to").value != ""){
            output += " --until=" + document.getElementById("to").value;
        }
        let attributes = [];
        if (document.getElementById("date").checked) {
            attributes.push("%as");
        }
        if (document.getElementById("hash").checked) {
            attributes.push("%h");
        }
        if (document.getElementById("author").checked) {
            attributes.push("(%an)");
        }
        if (document.getElementById("message").checked) {
            attributes.push("%s");
        }
        if (document.getElementById("advanced").value == ""){
            if (attributes.length != 0){
                output += " --format='" + attributes.join(" ") + "'";
            }
        } else {
            output += " --format='" + document.getElementById("advanced").value + "'";
        }
        output += " " + document.getElementById("args").value;
        if (document.getElementById("copy").checked) {
            output += " | clip";
        }
        command = output;
        document.getElementById("command").innerHTML = command;

    }
    function copy(){
        let text = document.getElementById("command").innerHTML;
        navigator.clipboard.writeText(text);
        document.getElementById("command").style.color = "#39ff14";
        setTimeout(()=>{
            document.getElementById("command").style.color = "white";
        }, 500);

    }

</script>